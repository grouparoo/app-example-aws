version: "3.0"
services:
  # redis:
  #   image: redis
  #   restart: always
  #   networks:
  #     - grouparoo_backend

  # db:
  #   image: postgres
  #   restart: always
  #   environment:
  #     POSTGRES_PASSWORD: password
  #     POSTGRES_DB: grouparoo_docker
  #   networks:
  #     - grouparoo_backend

  grouparoo-web:
    build: ./
    restart: always
    ports:
      - 8080:8080
    environment:
      PORT: 8080
      REDIS_URL: redis://mock
      DATABASE_URL: sqlite://grouparoo_development.sqlite
      WEB_SERVER: "true"
      WORKERS: 0
      SERVER_TOKEN: "server-token"
    # depends_on:
    #   - db
    #   - redis
    # networks:
    #   - grouparoo_frontend
    #   - grouparoo_backend

  # grouparoo-worker:
  #   build: ./
  #   restart: always
  #   environment:
  #     REDIS_URL: redis://mock
  #     DATABASE_URL: sqlite://grouparoo_development.sqlite
  #     WEB_SERVER: "false"
  #     WORKERS: 10
  #     SERVER_TOKEN: "server-token"
  #   depends_on:
  #     - db
  #     - redis
  #     - grouparoo-web
  #   networks:
  #     - grouparoo_frontend
  #     - grouparoo_backend
# networks:
#   grouparoo_frontend:
#   grouparoo_backend:
